package com.fitin.shopping.controller;

import com.fitin.shopping.dto.CartDetailDto;
import com.fitin.shopping.dto.CartItemDto;
import com.fitin.shopping.service.CartService;
import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/cart")
@RequiredArgsConstructor
public class CartController {

    private final CartService cartService;

    // 장바구니 아이템 추가
    @PostMapping("/add")
    public ResponseEntity<String> addItemToCart(@RequestBody CartItemDto cartItemDto) {
        cartService.addItemToCart(cartItemDto);
        return ResponseEntity.ok("Item added to cart.");
    }

    // 장바구니 조회
    @GetMapping("/items")
    public ResponseEntity<List<CartDetailDto>> getCartItems(@RequestParam("cartId") Long cartId) {
        List<CartDetailDto> cartItems = cartService.getCartItems(cartId);
        return ResponseEntity.ok(cartItems);
    }

    // 장바구니 아이템 삭제
    @DeleteMapping("/remove/{cartItemId}")
    public ResponseEntity<String> removeItemFromCart(@PathVariable Long cartItemId) {
        cartService.removeItemFromCart(cartItemId);
        return ResponseEntity.ok("Item removed from cart.");
    }

    // 장바구니 아이템 수량 업데이트
    @PutMapping("/update/{cartItemId}")
    public ResponseEntity<String> updateCartItem(@PathVariable Long cartItemId, @RequestBody CartItemDto cartItemDto) {
        cartService.updateCartItem(cartItemId, cartItemDto);
        return ResponseEntity.ok("Cart item updated.");
    }
}
